---
title: "Tidy Data Tutorial"
author: "rpdunn"
date: "March 13, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

##Tidy data
Long-form data where variable names are at the top of columns and rows represent individual observations.
Import the Gapminder dataset and check out what the data looks like using a few different functions.

```{r echo=FALSE}
data<-read_csv("https://raw.githubusercontent.com/jules32/2017-11-30-MBARI/gh-pages/data/gapminder.csv")
  #read_csv is a tidyverse function that requires fewer arguments that read.csv (base function)
str(data)
head(data, 10)
tail(data, 5)
dim(data)
ncol(data)
nrow(data)

```

What are the values in a particular column? Use the unique() function
can select which column to look at using either $ or []

```{r , echo=FALSE}
unique(data$country)
unique(data$continent)

unique(data[,4]) #or
unique(data[,"continent"])
```



```{r}
summary(data)
data2<- subset(data, year == 2007)
summary(data2$gdpPercap)
#install.packages("skimr")    #only need to run this line if you haven't already installed this package
library(skimr)
skim(data)

```

##DPLYR
The tidy data philosophy:
Select ---> Apply ---> Combine


```{r}
filter(data,continent == "Asia")
filter(data, lifeExp >= mean(lifeExp, data=data))
data2<-select(data, -country,-pop)
filter(data2, year == 2007)
```

###the PIPE
%>%
This lets you string together multiple data manipulation functions without storing intermediate objects 
```{r}
select(data, -continent) %>% 
  filter(year == 2007)  ##when you pipe, the second function doesn't need a specific data frame to work on
```

Mutate: a way to do an operation on an entire column and then add a new column with the resulting values.
#^How is this different from vectorizing?
```{r}
data %>% mutate(gdp = gdpPercap * pop)
SA_weath<- filter(data, continent == "Americas") %>% mutate(lifetime_wealth = lifeExp*gdpPercap)
```

